<!DOCTYPE html>
<html>

	<head>
		<script src="../stitch.js"></script>
		<style>
			svg {
				margin: auto;
				position: absolute;
				inset: 0;
			}
		</style>
	</head>

	<body>
		<script>

			let shape = [
				new Stitch.Math.Vector(102, 356), new Stitch.Math.Vector( 24, 251), new Stitch.Math.Vector( 32, 179), new Stitch.Math.Vector( 84, 250), new Stitch.Math.Vector( 58, 145),
				new Stitch.Math.Vector( 80, 108), new Stitch.Math.Vector(127,  46), new Stitch.Math.Vector(127, 102), new Stitch.Math.Vector(102, 140), new Stitch.Math.Vector(116, 164),
				new Stitch.Math.Vector(135, 188), new Stitch.Math.Vector(171, 151), new Stitch.Math.Vector(193, 106), new Stitch.Math.Vector(201,  73), new Stitch.Math.Vector(233,  57),
				new Stitch.Math.Vector(232,  86), new Stitch.Math.Vector(225, 112), new Stitch.Math.Vector(240, 116), new Stitch.Math.Vector(256,  94), new Stitch.Math.Vector(279,  73),
				new Stitch.Math.Vector(320,  85), new Stitch.Math.Vector(329, 118), new Stitch.Math.Vector(354, 173), new Stitch.Math.Vector(362, 228), new Stitch.Math.Vector(356, 266),
				new Stitch.Math.Vector(312, 211), new Stitch.Math.Vector(269, 190), new Stitch.Math.Vector(247, 206), new Stitch.Math.Vector(227, 240), new Stitch.Math.Vector(228, 262),
				new Stitch.Math.Vector(243, 255), new Stitch.Math.Vector(246, 233), new Stitch.Math.Vector(256, 218), new Stitch.Math.Vector(282, 219), new Stitch.Math.Vector(312, 246),
				new Stitch.Math.Vector(323, 268), new Stitch.Math.Vector(331, 301), new Stitch.Math.Vector(319, 325), new Stitch.Math.Vector(290, 356), new Stitch.Math.Vector(248, 362),
				new Stitch.Math.Vector(216, 357), new Stitch.Math.Vector(205, 337), new Stitch.Math.Vector(199, 293), new Stitch.Math.Vector(189, 246), new Stitch.Math.Vector(172, 235),
				new Stitch.Math.Vector(152, 245), new Stitch.Math.Vector(139, 261), new Stitch.Math.Vector(138, 283), new Stitch.Math.Vector(146, 277), new Stitch.Math.Vector(159, 257),
				new Stitch.Math.Vector(174, 256), new Stitch.Math.Vector(174, 274), new Stitch.Math.Vector(177, 302), new Stitch.Math.Vector(177, 336), new Stitch.Math.Vector(158, 358),
				new Stitch.Math.Vector(121, 366)
			];

			let holes = [
				[new Stitch.Math.Vector(142, 324), new Stitch.Math.Vector(142, 296), new Stitch.Math.Vector(121, 297), new Stitch.Math.Vector(108, 315), new Stitch.Math.Vector(125, 338)],
				[new Stitch.Math.Vector(206, 139), new Stitch.Math.Vector(194, 150), new Stitch.Math.Vector(203, 166), new Stitch.Math.Vector(217, 146)],
				[new Stitch.Math.Vector(234, 309), new Stitch.Math.Vector(234, 326), new Stitch.Math.Vector(260, 326), new Stitch.Math.Vector(286, 295), new Stitch.Math.Vector(286, 264), new Stitch.Math.Vector(254, 279)]
			];

			let pattern = new Stitch.Pattern(400, 400);

			let thread = pattern.addThread(0, 0, 0);

			let polyline = Stitch.Math.Polyline.fromVectors(shape, true).getRounded(5);
			let contours = [
				Stitch.Math.Polyline.fromVectors(holes[0], true).getRounded(5),
				Stitch.Math.Polyline.fromVectors(holes[1], true).getRounded(5),
				Stitch.Math.Polyline.fromVectors(holes[2], true).getRounded(5),
			];
			thread.addRun(new Stitch.Runs.SimpleFill(3, 0.15, 0.1, polyline, contours));

			let svg = pattern.draw(window.innerWidth, window.innerHeight, { showStitches: false });

			window.addEventListener("resize", Stitch.Browser.debounce(() => { svg.remove(); svg = pattern.draw(window.innerWidth, window.innerHeight); }, 10));

			let modal = Stitch.Browser.getDownloadModal(pattern, "basicExample", document.body);

			window.addEventListener("keydown", (e) => { if (e.code === "KeyD") modal.open(); });

		</script>
	</body>

</html>